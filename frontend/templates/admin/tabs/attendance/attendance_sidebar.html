<div class="w-[260px] h-full flex flex-col">
  <!-- Fixed top section -->
  <div class="px-4 pt-4 shrink-0">
    <!-- 📊 Daily View Overview Button -->
    <div class="mb-4">
      <form method="get" action="{{ url_for('admin_bp.attendance') }}">
        <button type="submit"
                class="w-full py-3 text-left rounded-lg border border-cyan-500/30 bg-gray-800 text-white hover:bg-cyan-500/20 transition-all flex items-center space-x-3"
                {% if not request.args.get('view') or request.args.get('view') == 'daily' %}style="background-color: #00bcd4; color: black; font-weight: bold; box-shadow: 0 0 8px #00bcd4;"{% endif %}>
          <svg class="w-5 h-5 {% if not request.args.get('view') or request.args.get('view') == 'daily' %}text-black{% else %}text-cyan-400{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
          </svg>
          <span>Daily View</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Scrollable section -->
  <div class="flex-1 overflow-y-auto scrollbar-hide px-4 pb-4">
    <!-- View Options -->
    <div class="mb-4 space-y-2">
      <form method="get" action="{{ url_for('admin_bp.attendance') }}">
        <input type="hidden" name="view" value="weekly">
        <button type="submit"
                class="w-full py-2 text-left rounded-lg border border-cyan-500/30 bg-gray-800 text-white hover:bg-cyan-500/20 transition-all flex items-center space-x-3"
                {% if request.args.get('view') == 'weekly' %}style="background-color: #00bcd4; color: black; font-weight: bold; box-shadow: 0 0 8px #00bcd4;"{% endif %}>
          <svg class="w-4 h-4 {% if request.args.get('view') == 'weekly' %}text-black{% else %}text-cyan-400{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
          <span class="text-sm">Weekly View</span>
        </button>
      </form>
      
      <form method="get" action="{{ url_for('admin_bp.attendance') }}">
        <input type="hidden" name="view" value="monthly">
        <button type="submit"
                class="w-full py-2 text-left rounded-lg border border-cyan-500/30 bg-gray-800 text-white hover:bg-cyan-500/20 transition-all flex items-center space-x-3"
                {% if request.args.get('view') == 'monthly' %}style="background-color: #00bcd4; color: black; font-weight: bold; box-shadow: 0 0 8px #00bcd4;"{% endif %}>
          <svg class="w-4 h-4 {% if request.args.get('view') == 'monthly' %}text-black{% else %}text-cyan-400{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
          <span class="text-sm">Monthly View</span>
        </button>
      </form>
      
      <form method="get" action="{{ url_for('admin_bp.attendance') }}">
        <input type="hidden" name="view" value="custom">
        <button type="submit"
                class="w-full py-2 text-left rounded-lg border border-cyan-500/30 bg-gray-800 text-white hover:bg-cyan-500/20 transition-all flex items-center space-x-3"
                {% if request.args.get('view') == 'custom' %}style="background-color: #00bcd4; color: black; font-weight: bold; box-shadow: 0 0 8px #00bcd4;"{% endif %}>
          <svg class="w-4 h-4 {% if request.args.get('view') == 'custom' %}text-black{% else %}text-cyan-400{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
          </svg>
          <span class="text-sm">Custom Range</span>
        </button>
      </form>
    </div>

    <!-- Date Selection -->
    <div class="mb-4">
      {% set current_view = request.args.get('view', 'daily') %}
      
      {% if current_view == 'custom' %}
        <!-- Custom Range: Two Date Inputs -->
        <label class="block text-xs font-medium text-gray-400 uppercase tracking-wide mb-2">Date Range</label>
        <div class="space-y-2">
          <input type="date" value="2024-07-15" 
                 placeholder="Start Date"
                 class="w-full px-3 py-2 border border-cyan-500/30 rounded-lg text-sm text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors">
          <input type="date" value="2024-07-22" 
                 placeholder="End Date"
                 class="w-full px-3 py-2 border border-cyan-500/30 rounded-lg text-sm text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors">
        </div>
      {% else %}
        <!-- Single Date Selection for Daily/Weekly/Monthly -->
        <label class="block text-xs font-medium text-gray-400 uppercase tracking-wide mb-2">
          {% if current_view == 'daily' %}
            Select Date
          {% elif current_view == 'weekly' %}
            Select Week
          {% elif current_view == 'monthly' %}
            Select Month
          {% endif %}
        </label>
        <form method="get" action="{{ url_for('admin_bp.attendance') }}" id="dateForm">
          <!-- Preserve current filters -->
          <input type="hidden" name="view" value="{{ current_view }}">
          <input type="hidden" name="name" value="{{ request.args.get('name', '') }}">
          <input type="hidden" name="id" value="{{ request.args.get('id', '') }}">
          <input type="hidden" name="occupation" value="{{ request.args.get('occupation', '') }}">
          
          <input type="date" 
                 name="date"
                 value="{{ request.args.get('date', '') }}" 
                 onchange="document.getElementById('dateForm').submit()"
                 class="w-full px-3 py-2 border border-cyan-500/30 rounded-lg text-sm text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors">
        </form>
      {% endif %}
    </div>

    <!-- 🔍 Advanced Search Filters -->
    <div class="mb-4">
      <label class="block text-xs font-medium text-gray-400 uppercase tracking-wide mb-2">Advanced Filters</label>
      <form method="get" action="{{ url_for('admin_bp.attendance') }}" id="filterForm">
        <!-- Preserve current view and date -->
        <input type="hidden" name="view" value="{{ request.args.get('view', 'daily') }}">
        <input type="hidden" name="date" value="{{ request.args.get('date', '') }}">
        
        <div class="space-y-2">
          <input
            type="text"
            name="name"
            placeholder="Search by name..."
            value="{{ request.args.get('name', '') }}"
            onchange="document.getElementById('filterForm').submit()"
            class="w-full px-3 py-2 border border-cyan-500/30 rounded-lg text-sm text-white placeholder-gray-400 bg-gray-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"
          />
          <input
            type="text"
            name="id"
            placeholder="Search by ID..."
            value="{{ request.args.get('id', '') }}"
            onchange="document.getElementById('filterForm').submit()"
            class="w-full px-3 py-2 border border-cyan-500/30 rounded-lg text-sm text-white placeholder-gray-400 bg-gray-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"
          />
          <input
            type="text"
            name="occupation"
            placeholder="Search by occupation..."
            value="{{ request.args.get('occupation', '') }}"
            onchange="document.getElementById('filterForm').submit()"
            class="w-full px-3 py-2 border border-cyan-500/30 rounded-lg text-sm text-white placeholder-gray-400 bg-gray-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"
          />
        </div>
      </form>
    </div>

    <!-- Quick Filters -->
    <div class="mb-4">
      <label class="block text-xs font-medium text-gray-400 uppercase tracking-wide mb-2">Quick Filters</label>
      <div class="space-y-1">
        <label class="flex items-center text-sm text-gray-300 cursor-pointer">
          <input type="checkbox" checked 
                 class="mr-2 rounded border-gray-600 bg-gray-800 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-0">
          <span>Show Present</span>
        </label>
        <label class="flex items-center text-sm text-gray-300 cursor-pointer">
          <input type="checkbox" 
                 class="mr-2 rounded border-gray-600 bg-gray-800 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-0">
          <span>Show Absent</span>
        </label>
        <label class="flex items-center text-sm text-gray-300 cursor-pointer">
          <input type="checkbox" 
                 class="mr-2 rounded border-gray-600 bg-gray-800 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-0">
          <span>Incomplete Checkout</span>
        </label>
      </div>
    </div>
  </div>
</div>